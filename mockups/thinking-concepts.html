<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OneSeek — Fade Layer Mockup</title>
<style>
  :root {
    --bg: #09090b;
    --bg-muted: #18181b;
    --fg: #fafafa;
    --fg-muted: #a1a1aa;
    --fg-dim: #52525b;
    --primary: #6d28d9;
    --primary-light: #8b5cf6;
    --border: #27272a;
    --thread-max: 44rem;
    --fade-max-h: 11rem;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:var(--bg); color:var(--fg); font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif; }

  /* Nav */
  .state-nav { position:sticky; top:0; z-index:50; background:rgba(9,9,11,0.92); backdrop-filter:blur(8px); border-bottom:1px solid var(--border); padding:0.75rem 2rem; display:flex; gap:0.5rem; justify-content:center; align-items:center; }
  .state-nav .label { font-size:0.8rem; color:var(--fg-dim); margin-right:0.5rem; }
  .state-nav button { padding:0.4rem 0.9rem; border-radius:0.375rem; border:1px solid var(--border); background:var(--bg-muted); color:var(--fg-muted); cursor:pointer; font-size:0.8rem; transition:all 0.2s; }
  .state-nav button.active { background:var(--primary); color:#fff; border-color:var(--primary); }
  .state-nav button:hover:not(.active) { border-color:var(--fg-dim); color:var(--fg); }

  .page { max-width:52rem; margin:0 auto; padding:2rem 1rem; }
  .page-title { text-align:center; margin-bottom:0.25rem; font-size:1.15rem; font-weight:600; }
  .page-sub { text-align:center; color:var(--fg-muted); font-size:0.8rem; margin-bottom:2rem; }

  .msg-shell { max-width:var(--thread-max); margin:0 auto 2rem; }
  .user-msg { background:var(--bg-muted); border-radius:1rem; padding:0.7rem 1rem; max-width:24rem; margin-left:auto; margin-bottom:1.25rem; font-size:0.875rem; }

  /* ===== FADE LAYER — ROLLING ===== */

  .fade-area {
    position:relative;
    max-height:var(--fade-max-h);
    overflow:hidden;
    padding:0 0.5rem;
    transition:max-height 0.4s ease;
  }
  /* Scrollable inner so content auto-scrolls during streaming */
  .fade-inner {
    display:flex;
    flex-direction:column;
    justify-content:flex-end;
    min-height:100%;
  }
  /* Top fade-out gradient — content "dissolves" as it scrolls up */
  .fade-area::before {
    content:'';
    position:absolute;
    top:0; left:0; right:0;
    height:3.5rem;
    background:linear-gradient(to bottom, var(--bg) 0%, transparent 100%);
    pointer-events:none;
    z-index:2;
    transition:opacity 0.3s;
  }
  .fade-area.expanded { max-height:none; }
  .fade-area.expanded::before { opacity:0; }

  /* Done state: extra dimming */
  .fade-area.done .fade-block { opacity:0.35; transition:opacity 0.4s; }
  .fade-area.done:hover .fade-block { opacity:0.75; }

  /* Each reasoning block */
  .fade-block {
    margin-bottom:0.1rem;
    transition:opacity 0.4s ease;
  }

  /* Node header */
  .fade-header {
    font-size:0.68rem;
    font-weight:600;
    color:var(--primary-light);
    padding:0.3rem 0 0.05rem;
    display:flex;
    align-items:center;
    gap:0.4rem;
  }
  .fade-header .h-line {
    flex:1;
    height:1px;
    background:var(--primary-light);
    opacity:0.12;
  }

  /* Reasoning text */
  .fade-text {
    font-size:0.76rem;
    color:var(--fg-muted);
    line-height:1.6;
    padding:0.05rem 0 0.2rem;
  }

  /* Tool call */
  .fade-tool {
    display:inline-flex;
    align-items:center;
    gap:0.35rem;
    background:var(--bg-muted);
    border:1px solid var(--border);
    border-radius:0.375rem;
    padding:0.2rem 0.55rem;
    font-size:0.7rem;
    color:var(--fg-muted);
    margin:0.2rem 0;
  }
  .fade-tool .t-time { color:var(--fg-dim); margin-left:0.35rem; font-size:0.62rem; }

  /* Streaming cursor */
  .fade-cursor::after {
    content:'';
    display:inline-block;
    width:2px; height:0.85em;
    background:var(--primary-light);
    margin-left:2px;
    vertical-align:text-bottom;
    animation:blink 1s steps(2) infinite;
  }
  @keyframes blink { 0%{opacity:1} 50%{opacity:0} }
  @keyframes pulse { 0%,100%{opacity:0.3} 50%{opacity:1} }
  .streaming-dot {
    display:inline-block;
    width:5px; height:5px;
    border-radius:50%;
    background:var(--primary-light);
    animation:pulse 1.2s ease-in-out infinite;
    margin-right:0.3rem;
    vertical-align:middle;
  }

  /* Expand/collapse toggle — minimal */
  .fade-toggle {
    display:flex;
    align-items:center;
    gap:0.35rem;
    padding:0.2rem 0.5rem;
    font-size:0.65rem;
    color:var(--fg-dim);
    cursor:pointer;
    background:none;
    border:none;
    transition:color 0.2s;
    user-select:none;
  }
  .fade-toggle:hover { color:var(--fg-muted); }
  .fade-toggle .chevron {
    display:inline-block;
    transition:transform 0.25s;
    font-size:0.6rem;
  }
  .fade-toggle.open .chevron { transform:rotate(180deg); }

  /* Response */
  .response-text { padding:0 0.5rem; line-height:1.7; font-size:0.875rem; margin-top:0.5rem; }
  .response-text ul { list-style:disc; padding-left:1.25rem; margin:0.4rem 0; }
  .response-text li { margin:0.15rem 0; }
  .response-text strong { font-weight:600; }

  .msg-footer { display:flex; gap:0.75rem; padding:0.25rem 0.5rem; margin-top:0.75rem; }
  .msg-footer button { background:none; border:none; color:var(--fg-dim); cursor:pointer; font-size:0.72rem; display:flex; align-items:center; gap:0.3rem; }
  .msg-footer button:hover { color:var(--fg-muted); }
  .msg-footer svg { width:13px; height:13px; }

  .state { display:none; }
  .state.active { display:block; }
  .hint { text-align:center; font-size:0.68rem; color:var(--fg-dim); margin-top:1rem; font-style:italic; }

  /* Hide scrollbar globally on fade-area */
  .fade-area { scrollbar-width:none; -ms-overflow-style:none; }
  .fade-area::-webkit-scrollbar { display:none; }
</style>
</head>
<body>

<nav class="state-nav">
  <span class="label">Visa:</span>
  <button class="active" onclick="showState('streaming',this)">Under streaming</button>
  <button onclick="showState('done',this)">Slutresultat</button>
  <button onclick="showState('expanded',this)">Expanderad</button>
</nav>

<div class="page">
  <div class="page-title">Fade Layer — Rolling</div>
  <div class="page-sub">Max-height med top-fade. Äldre content försvinner uppåt. Ingen scrollbar.</div>

  <!-- ========================
       STREAMING
       ======================== -->
  <div class="state active" id="state-streaming">
    <div class="msg-shell">
      <div class="user-msg">Hämta idag väder i Stockholm enligt SMHI</div>

      <div class="fade-area" style="overflow-y:auto;">
        <div class="fade-inner">
          <div class="fade-block">
            <div class="fade-header">Resolving intent <span class="h-line"></span></div>
            <div class="fade-text">Användaren frågar om dagens väder i Stockholm via SMHI. Det här är en enkel fråga som kräver en enda datakälla. Klassificering: simple. Jag behöver inte bryta ner den i delfrågor utan kan direkt gå vidare till att välja lämplig agent.</div>
          </div>

          <div class="fade-block">
            <div class="fade-header">Selecting agents <span class="h-line"></span></div>
            <div class="fade-text">Jag har tillgång till en agent med namnet "väder" som är specialiserad på SMHI-data. Den matchar perfekt för denna fråga. Inga andra agenter behövs — varken trafik, statistik eller kunskap.</div>
          </div>

          <div class="fade-block">
            <div class="fade-header">Building plan <span class="h-line"></span></div>
            <div class="fade-text">Planen: 1. Anropa väder-agenten med uppgift att hämta aktuellt väder i Stockholm. 2. Ta emot SMHI-data och presentera temperatur, vind, nederbörd och molnighet. 3. Sammanfatta i en kort, tydlig översikt.</div>
          </div>

          <div class="fade-block">
            <div class="fade-tool"><span>&#9728;</span> smhi_weather("Stockholm", country_code="se") <span class="t-time">1.2s</span></div>
          </div>

          <div class="fade-block">
            <div class="fade-header"><span class="streaming-dot"></span>Synthesizing response <span class="h-line"></span></div>
            <div class="fade-text">Jag har nu fått väderdata från SMHI för Stockholm. Temperaturen ligger på 0,6 °C med sydvästlig vind. Det är mulet med lätt snöfall. Jag sammanställer<span class="fade-cursor"></span></div>
          </div>
        </div>
      </div>

      <div class="hint">&#8593; Max-höjd begränsad. Äldre tankar scrollar bort uppåt med gradient-fade.</div>
    </div>
  </div>

  <!-- ========================
       DONE (collapsed)
       ======================== -->
  <div class="state" id="state-done">
    <div class="msg-shell">
      <div class="user-msg">Hämta idag väder i Stockholm enligt SMHI</div>

      <div class="fade-area done" id="fade-done-area">
        <div class="fade-inner">
          <div class="fade-block">
            <div class="fade-header">Resolving intent <span class="h-line"></span></div>
            <div class="fade-text">Användaren frågar om dagens väder i Stockholm via SMHI. Det här är en enkel fråga som kräver en enda datakälla. Klassificering: simple. Jag behöver inte bryta ner den i delfrågor utan kan direkt gå vidare till att välja lämplig agent.</div>
          </div>
          <div class="fade-block">
            <div class="fade-header">Selecting agents <span class="h-line"></span></div>
            <div class="fade-text">Jag har tillgång till en agent med namnet "väder" som är specialiserad på SMHI-data. Den matchar perfekt för denna fråga. Inga andra agenter behövs.</div>
          </div>
          <div class="fade-block">
            <div class="fade-header">Building plan <span class="h-line"></span></div>
            <div class="fade-text">Planen: 1. Anropa väder-agenten med uppgift att hämta aktuellt väder i Stockholm. 2. Ta emot SMHI-data. 3. Sammanfatta i kort översikt.</div>
          </div>
          <div class="fade-block">
            <div class="fade-tool"><span>&#9728;</span> smhi_weather("Stockholm") <span class="t-time">1.2s</span></div>
          </div>
          <div class="fade-block">
            <div class="fade-header">Synthesizing response <span class="h-line"></span></div>
            <div class="fade-text">Sammanställer väderdata till strukturerat svar med de viktigaste parametrarna.</div>
          </div>
        </div>
      </div>

      <button class="fade-toggle" onclick="toggleExpand(this, 'fade-done-area')">
        <span class="chevron">&#x25BE;</span> 5 steg &middot; 3.4s
      </button>

      <div class="response-text">
        <strong>Vädret i Stockholm just nu (25 feb 2026) enligt SMHI:</strong>
        <ul>
          <li>Temperatur: 0,6 &deg;C</li>
          <li>Vind: sydväst 5,7 m/s (gust 12,3 m/s)</li>
          <li>Nederbörd: 0,2 mm — lätt snöfall</li>
          <li>Molnbedäckning: hög (8 oktaver)</li>
          <li>Luftfuktighet: 89 %</li>
        </ul>
        Kort sagt: Kyligt, mulet och med lätt snö i luften.
      </div>
      <div class="msg-footer">
        <button><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Kopiera</button>
        <button>&#x21BB; Generera om</button>
      </div>
    </div>
  </div>

  <!-- ========================
       EXPANDED
       ======================== -->
  <div class="state" id="state-expanded">
    <div class="msg-shell">
      <div class="user-msg">Hämta idag väder i Stockholm enligt SMHI</div>

      <div class="fade-area done expanded" id="fade-exp-area" style="max-height:none;">
        <div class="fade-inner">
          <div class="fade-block" style="opacity:0.75;">
            <div class="fade-header">Resolving intent <span class="h-line"></span></div>
            <div class="fade-text">Användaren frågar om dagens väder i Stockholm via SMHI. Det här är en enkel fråga som kräver en enda datakälla. Klassificering: simple. Jag behöver inte bryta ner den i delfrågor utan kan direkt gå vidare till att välja lämplig agent.</div>
          </div>
          <div class="fade-block" style="opacity:0.75;">
            <div class="fade-header">Selecting agents <span class="h-line"></span></div>
            <div class="fade-text">Jag har tillgång till en agent med namnet "väder" som är specialiserad på SMHI-data. Den matchar perfekt för denna fråga. Inga andra agenter behövs — varken trafik, statistik eller kunskap.</div>
          </div>
          <div class="fade-block" style="opacity:0.75;">
            <div class="fade-header">Building plan <span class="h-line"></span></div>
            <div class="fade-text">Planen: 1. Anropa väder-agenten med uppgift att hämta aktuellt väder i Stockholm. 2. Ta emot SMHI-data och presentera temperatur, vind, nederbörd och molnighet. 3. Sammanfatta i en kort, tydlig översikt.</div>
          </div>
          <div class="fade-block" style="opacity:0.75;">
            <div class="fade-tool"><span>&#9728;</span> smhi_weather("Stockholm", country_code="se") <span class="t-time">1.2s</span></div>
          </div>
          <div class="fade-block" style="opacity:0.75;">
            <div class="fade-header">Synthesizing response <span class="h-line"></span></div>
            <div class="fade-text">Jag har nu fått väderdata från SMHI för Stockholm. Temperaturen ligger på 0,6 °C med sydvästlig vind. Det är mulet med lätt snöfall. Jag sammanställer detta till ett strukturerat svar med de viktigaste parametrarna.</div>
          </div>
        </div>
      </div>

      <button class="fade-toggle open" onclick="toggleExpand(this, 'fade-exp-area')">
        <span class="chevron">&#x25BE;</span> 5 steg &middot; 3.4s
      </button>

      <div class="response-text">
        <strong>Vädret i Stockholm just nu (25 feb 2026) enligt SMHI:</strong>
        <ul>
          <li>Temperatur: 0,6 &deg;C</li>
          <li>Vind: sydväst 5,7 m/s (gust 12,3 m/s)</li>
          <li>Nederbörd: 0,2 mm — lätt snöfall</li>
          <li>Molnbedäckning: hög (8 oktaver)</li>
          <li>Luftfuktighet: 89 %</li>
        </ul>
        Kort sagt: Kyligt, mulet och med lätt snö i luften.
      </div>
      <div class="msg-footer">
        <button><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Kopiera</button>
        <button>&#x21BB; Generera om</button>
      </div>
    </div>
  </div>

</div>

<script>
function showState(state, btn) {
  document.querySelectorAll('.state').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.state-nav button').forEach(b => b.classList.remove('active'));
  document.getElementById('state-'+state).classList.add('active');
  btn.classList.add('active');
}
function toggleExpand(btn, areaId) {
  const area = document.getElementById(areaId);
  const isExpanded = area.classList.toggle('expanded');
  btn.classList.toggle('open', isExpanded);
}
</script>
</body>
</html>
