<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OneSeek — Fade Layer Mockup</title>
<style>
  :root {
    --bg: #09090b;
    --bg-muted: #18181b;
    --bg-muted-50: rgba(39,39,42,0.5);
    --fg: #fafafa;
    --fg-muted: #a1a1aa;
    --fg-dim: #52525b;
    --primary: #6d28d9;
    --primary-light: #8b5cf6;
    --border: #27272a;
    --thread-max: 44rem;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:var(--bg); color:var(--fg); font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif; }

  /* State toggle */
  .state-nav { position:sticky; top:0; z-index:50; background:rgba(9,9,11,0.92); backdrop-filter:blur(8px); border-bottom:1px solid var(--border); padding:0.75rem 2rem; display:flex; gap:0.5rem; justify-content:center; align-items:center; }
  .state-nav .label { font-size:0.8rem; color:var(--fg-dim); margin-right:0.5rem; }
  .state-nav button { padding:0.4rem 0.9rem; border-radius:0.375rem; border:1px solid var(--border); background:var(--bg-muted); color:var(--fg-muted); cursor:pointer; font-size:0.8rem; transition:all 0.2s; }
  .state-nav button.active { background:var(--primary); color:#fff; border-color:var(--primary); }
  .state-nav button:hover:not(.active) { border-color:var(--fg-dim); color:var(--fg); }

  .page { max-width:52rem; margin:0 auto; padding:2rem 1rem; }
  .page-title { text-align:center; margin-bottom:0.25rem; font-size:1.15rem; font-weight:600; }
  .page-sub { text-align:center; color:var(--fg-muted); font-size:0.8rem; margin-bottom:2rem; }

  /* Message shell */
  .msg-shell { max-width:var(--thread-max); margin:0 auto 2rem; }
  .user-msg { background:var(--bg-muted); border-radius:1rem; padding:0.7rem 1rem; max-width:24rem; margin-left:auto; margin-bottom:1.25rem; font-size:0.875rem; }

  /* ===== FADE LAYER ===== */

  /* The fade area contains all reasoning blocks */
  .fade-area {
    position:relative;
    padding:0 0.5rem;
    margin-bottom:0;
    transition:all 0.4s ease;
  }

  /* Gradient overlay mask — fades top content more in done state */
  .fade-area.done::before {
    content:'';
    position:absolute;
    top:0; left:0; right:0;
    height:60%;
    background:linear-gradient(to bottom, rgba(9,9,11,0.85) 0%, transparent 100%);
    pointer-events:none;
    z-index:1;
    transition:opacity 0.5s;
  }
  .fade-area.done:hover::before {
    opacity:0.15;
  }

  /* Each reasoning block (one per node) */
  .fade-block {
    margin-bottom:0.15rem;
    transition:opacity 0.5s ease;
    position:relative;
  }

  /* Node header */
  .fade-header {
    font-size:0.7rem;
    font-weight:600;
    color:var(--primary-light);
    padding:0.35rem 0 0.1rem;
    letter-spacing:0.01em;
    display:flex;
    align-items:center;
    gap:0.4rem;
  }
  .fade-header .h-line {
    flex:1;
    height:1px;
    background:var(--primary-light);
    opacity:0.15;
  }

  /* Reasoning text */
  .fade-text {
    font-size:0.78rem;
    color:var(--fg-muted);
    line-height:1.65;
    padding:0.1rem 0 0.25rem;
  }

  /* Tool call inline */
  .fade-tool {
    display:inline-flex;
    align-items:center;
    gap:0.35rem;
    background:var(--bg-muted);
    border:1px solid var(--border);
    border-radius:0.375rem;
    padding:0.25rem 0.6rem;
    font-size:0.72rem;
    color:var(--fg-muted);
    margin:0.25rem 0;
  }
  .fade-tool .t-time { color:var(--fg-dim); margin-left:0.4rem; font-size:0.65rem; }
  .fade-tool .t-icon { font-size:0.85rem; }

  /* === STREAMING STATE: opacity based on position === */
  .fade-area.streaming .fade-block:nth-child(1) { opacity:0.12; }
  .fade-area.streaming .fade-block:nth-child(2) { opacity:0.22; }
  .fade-area.streaming .fade-block:nth-child(3) { opacity:0.38; }
  .fade-area.streaming .fade-block:nth-child(4) { opacity:0.55; }
  .fade-area.streaming .fade-block:nth-child(5) { opacity:0.75; }
  .fade-area.streaming .fade-block:last-child  { opacity:1; }

  /* === DONE STATE: all faded, hover reveals === */
  .fade-area.done .fade-block { opacity:0.15; }
  .fade-area.done:hover .fade-block { opacity:0.8; }
  .fade-area.done .fade-block { transition:opacity 0.4s ease; }

  /* Streaming cursor on last block */
  .fade-cursor::after {
    content:'';
    display:inline-block;
    width:2px;
    height:0.85em;
    background:var(--primary-light);
    margin-left:2px;
    vertical-align:text-bottom;
    animation:blink 1s steps(2) infinite;
  }
  @keyframes blink { 0%{opacity:1} 50%{opacity:0} }

  /* Streaming indicator */
  .streaming-dot {
    display:inline-block;
    width:5px; height:5px;
    border-radius:50%;
    background:var(--primary-light);
    animation:pulse 1.2s ease-in-out infinite;
    margin-right:0.35rem;
    vertical-align:middle;
  }
  @keyframes pulse { 0%,100%{opacity:0.3} 50%{opacity:1} }

  /* Divider between thinking and response */
  .fade-divider {
    height:1px;
    background:linear-gradient(to right, transparent, var(--border) 20%, var(--border) 80%, transparent);
    margin:0.6rem 0.5rem 0.75rem;
    transition:opacity 0.4s;
  }
  .fade-area.done + .fade-divider { opacity:0.3; }
  .fade-area.done:hover ~ .fade-divider { opacity:0.8; }

  /* Collapsed summary for done state */
  .fade-summary {
    display:flex;
    align-items:center;
    gap:0.4rem;
    padding:0.2rem 0.5rem;
    font-size:0.68rem;
    color:var(--fg-dim);
    cursor:pointer;
    transition:opacity 0.3s;
    margin-bottom:0.35rem;
    user-select:none;
  }
  .fade-summary:hover { color:var(--fg-muted); }
  .fade-summary .s-dots {
    display:flex; gap:3px;
  }
  .fade-summary .s-dot {
    width:4px; height:4px;
    border-radius:50%;
    background:var(--fg-dim);
    opacity:0.4;
  }

  /* Response text */
  .response-text { padding:0 0.5rem; line-height:1.7; font-size:0.875rem; }
  .response-text ul { list-style:disc; padding-left:1.25rem; margin:0.4rem 0; }
  .response-text li { margin:0.15rem 0; }
  .response-text strong { font-weight:600; }

  /* Footer */
  .msg-footer { display:flex; gap:0.75rem; padding:0.25rem 0.5rem; margin-top:0.75rem; }
  .msg-footer button { background:none; border:none; color:var(--fg-dim); cursor:pointer; font-size:0.72rem; display:flex; align-items:center; gap:0.3rem; transition:color 0.2s; }
  .msg-footer button:hover { color:var(--fg-muted); }
  .msg-footer svg { width:13px; height:13px; }

  /* Hide/show states */
  .state { display:none; }
  .state.active { display:block; }

  /* Helper text */
  .hint { text-align:center; font-size:0.7rem; color:var(--fg-dim); margin-top:1rem; font-style:italic; }
</style>
</head>
<body>

<nav class="state-nav">
  <span class="label">Visa:</span>
  <button class="active" onclick="showState('streaming',this)">Under streaming</button>
  <button onclick="showState('done',this)">Slutresultat</button>
  <button onclick="showState('done-hover',this)">Slutresultat (hover)</button>
</nav>

<div class="page">
  <div class="page-title">Koncept 2 — Fade Layer</div>
  <div class="page-sub">Fullständig &lt;think&gt;-reasoning med opacity-gradient. Steg + resonemang integrerade.</div>

  <!-- ========================
       STATE: STREAMING
       ======================== -->
  <div class="state active" id="state-streaming">
    <div class="msg-shell">
      <div class="user-msg">Hämta idag väder i Stockholm enligt SMHI</div>

      <div class="fade-area streaming">

        <div class="fade-block">
          <div class="fade-header">Resolving intent <span class="h-line"></span></div>
          <div class="fade-text">Användaren frågar om dagens väder i Stockholm via SMHI. Det här är en enkel fråga som kräver en enda datakälla. Klassificering: simple. Jag behöver inte bryta ner den i delfrågor utan kan direkt gå vidare till att välja lämplig agent.</div>
        </div>

        <div class="fade-block">
          <div class="fade-header">Selecting agents <span class="h-line"></span></div>
          <div class="fade-text">Jag har tillgång till en agent med namnet "väder" som är specialiserad på SMHI-data. Den matchar perfekt för denna fråga. Inga andra agenter behövs — varken trafik, statistik eller kunskap.</div>
        </div>

        <div class="fade-block">
          <div class="fade-header">Building plan <span class="h-line"></span></div>
          <div class="fade-text">Planen:<br>1. Anropa väder-agenten med uppgift att hämta aktuellt väder i Stockholm<br>2. Ta emot SMHI-data och presentera temperatut, vind, nederbörd och molnighet<br>3. Sammanfatta i en kort, tydlig översikt</div>
        </div>

        <div class="fade-block">
          <div class="fade-tool"><span class="t-icon">&#9728;</span> smhi_weather("Stockholm", country_code="se") <span class="t-time">1.2s</span></div>
        </div>

        <div class="fade-block">
          <div class="fade-header"><span class="streaming-dot"></span>Synthesizing response <span class="h-line"></span></div>
          <div class="fade-text">Jag har nu fått väderdata från SMHI för Stockholm. Temperaturen ligger på 0,6 °C med sydvästlig vind. Det är mulet med lätt snöfall. Jag sammanställer detta till ett strukturerat svar med de viktigaste<span class="fade-cursor"></span></div>
        </div>

      </div>

      <div class="hint">&#8593; Äldre tankar tonar ner automatiskt. Senaste raden streamas live.</div>
    </div>
  </div>

  <!-- ========================
       STATE: DONE
       ======================== -->
  <div class="state" id="state-done">
    <div class="msg-shell">
      <div class="user-msg">Hämta idag väder i Stockholm enligt SMHI</div>

      <div class="fade-area done" id="fade-done">

        <div class="fade-block">
          <div class="fade-header">Resolving intent <span class="h-line"></span></div>
          <div class="fade-text">Användaren frågar om dagens väder i Stockholm via SMHI. Det här är en enkel fråga som kräver en enda datakälla. Klassificering: simple. Jag behöver inte bryta ner den i delfrågor utan kan direkt gå vidare till att välja lämplig agent.</div>
        </div>

        <div class="fade-block">
          <div class="fade-header">Selecting agents <span class="h-line"></span></div>
          <div class="fade-text">Jag har tillgång till en agent med namnet "väder" som är specialiserad på SMHI-data. Den matchar perfekt för denna fråga. Inga andra agenter behövs — varken trafik, statistik eller kunskap.</div>
        </div>

        <div class="fade-block">
          <div class="fade-header">Building plan <span class="h-line"></span></div>
          <div class="fade-text">Planen:<br>1. Anropa väder-agenten med uppgift att hämta aktuellt väder i Stockholm<br>2. Ta emot SMHI-data och presentera temperatur, vind, nederbörd och molnighet<br>3. Sammanfatta i en kort, tydlig översikt</div>
        </div>

        <div class="fade-block">
          <div class="fade-tool"><span class="t-icon">&#9728;</span> smhi_weather("Stockholm", country_code="se") <span class="t-time">1.2s</span></div>
        </div>

        <div class="fade-block">
          <div class="fade-header">Synthesizing response <span class="h-line"></span></div>
          <div class="fade-text">Jag har nu fått väderdata från SMHI för Stockholm. Temperaturen ligger på 0,6 °C med sydvästlig vind. Det är mulet med lätt snöfall. Jag sammanställer detta till ett strukturerat svar med de viktigaste parametrarna.</div>
        </div>

      </div>

      <div class="fade-summary">
        <div class="s-dots"><div class="s-dot"></div><div class="s-dot"></div><div class="s-dot"></div></div>
        5 steg &middot; 3.4s &middot; hover för att visa tankar
      </div>

      <div class="fade-divider"></div>

      <div class="response-text">
        <strong>Vädret i Stockholm just nu (25 feb 2026) enligt SMHI:</strong>
        <ul>
          <li>Temperatur: 0,6 &deg;C</li>
          <li>Vind: sydväst 5,7 m/s (gust 12,3 m/s)</li>
          <li>Nederbörd: 0,2 mm — lätt snöfall</li>
          <li>Molnbedäckning: hög (8 oktaver)</li>
          <li>Luftfuktighet: 89 %</li>
        </ul>
        Kort sagt: Kyligt, mulet och med lätt snö i luften.
      </div>
      <div class="msg-footer">
        <button><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Kopiera</button>
        <button>&#x21BB; Generera om</button>
      </div>
    </div>
  </div>

  <!-- ========================
       STATE: DONE + HOVER
       ======================== -->
  <div class="state" id="state-done-hover">
    <div class="msg-shell">
      <div class="user-msg">Hämta idag väder i Stockholm enligt SMHI</div>

      <div class="fade-area" style="position:relative;">

        <div class="fade-block" style="opacity:0.8;">
          <div class="fade-header">Resolving intent <span class="h-line"></span></div>
          <div class="fade-text">Användaren frågar om dagens väder i Stockholm via SMHI. Det här är en enkel fråga som kräver en enda datakälla. Klassificering: simple. Jag behöver inte bryta ner den i delfrågor utan kan direkt gå vidare till att välja lämplig agent.</div>
        </div>

        <div class="fade-block" style="opacity:0.8;">
          <div class="fade-header">Selecting agents <span class="h-line"></span></div>
          <div class="fade-text">Jag har tillgång till en agent med namnet "väder" som är specialiserad på SMHI-data. Den matchar perfekt för denna fråga. Inga andra agenter behövs — varken trafik, statistik eller kunskap.</div>
        </div>

        <div class="fade-block" style="opacity:0.8;">
          <div class="fade-header">Building plan <span class="h-line"></span></div>
          <div class="fade-text">Planen:<br>1. Anropa väder-agenten med uppgift att hämta aktuellt väder i Stockholm<br>2. Ta emot SMHI-data och presentera temperatur, vind, nederbörd och molnighet<br>3. Sammanfatta i en kort, tydlig översikt</div>
        </div>

        <div class="fade-block" style="opacity:0.8;">
          <div class="fade-tool"><span class="t-icon">&#9728;</span> smhi_weather("Stockholm", country_code="se") <span class="t-time">1.2s</span></div>
        </div>

        <div class="fade-block" style="opacity:0.8;">
          <div class="fade-header">Synthesizing response <span class="h-line"></span></div>
          <div class="fade-text">Jag har nu fått väderdata från SMHI för Stockholm. Temperaturen ligger på 0,6 °C med sydvästlig vind. Det är mulet med lätt snöfall. Jag sammanställer detta till ett strukturerat svar med de viktigaste parametrarna.</div>
        </div>

      </div>

      <div class="fade-summary" style="opacity:0.6;">
        <div class="s-dots"><div class="s-dot"></div><div class="s-dot"></div><div class="s-dot"></div></div>
        5 steg &middot; 3.4s
      </div>

      <div class="fade-divider"></div>

      <div class="response-text">
        <strong>Vädret i Stockholm just nu (25 feb 2026) enligt SMHI:</strong>
        <ul>
          <li>Temperatur: 0,6 &deg;C</li>
          <li>Vind: sydväst 5,7 m/s (gust 12,3 m/s)</li>
          <li>Nederbörd: 0,2 mm — lätt snöfall</li>
          <li>Molnbedäckning: hög (8 oktaver)</li>
          <li>Luftfuktighet: 89 %</li>
        </ul>
        Kort sagt: Kyligt, mulet och med lätt snö i luften.
      </div>
      <div class="msg-footer">
        <button><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Kopiera</button>
        <button>&#x21BB; Generera om</button>
      </div>
      <div class="hint">&#8593; Hover-läge: alla tankar synliga vid 80% opacity</div>
    </div>
  </div>

</div>

<script>
function showState(state, btn) {
  document.querySelectorAll('.state').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.state-nav button').forEach(b => b.classList.remove('active'));
  document.getElementById('state-'+state).classList.add('active');
  btn.classList.add('active');
}
</script>
</body>
</html>
